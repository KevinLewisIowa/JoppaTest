<div class="card panel-info" style="opacity: 0.92">
  <div class="card-header text-center" style="opacity: 0.93">
    <h2 align="left">{{ thisRoute.name }}</h2>
    <h4 align="left">
      Number of Total Clients for Route: {{ clientCountForRoute }}
    </h4>
    <p></p>
    <h4 align="left"><span style="background-color: yellow">{{ thisRoute.admin_notes }}</span></h4>

    <div>
      <button
        (click)="showRouteLocations()"
        class="btn btn-primary"
        style="float: left"
        type="button"
      >
        <fa-icon [icon]="mapIcon"></fa-icon> Show Route Map
      </button>
      <button (click)="routeEditMdl.showModal(thisRoute)" class="btn btn-primary" style="float: right" type="button" *ngIf="isAdmin">
        Route Info <fa-icon [icon]="informationIcon"></fa-icon>
      </button>
    </div>
  </div>
  <div class="panel-body">
    <div class="card">
      <h3 align="left">Camps</h3>
      <div>
        <button
          (click)="newLocationCamp()"
          class="btn btn-primary"
          style="float: right"
          type="button"
          *ngIf="isAdmin"
        >
          <fa-icon [icon]="createIcon"></fa-icon> Create Camp
        </button>
      </div>
    </div>
    <table class="table">
      <tbody>
        <tr
          *ngFor="let locationCamp of locationCamps"
          style="height: 75px"
          (click)="openLocation(locationCamp)"
        >
          <td class="text-left">
            <b>{{ locationCamp.name }} - {{ locationCamp.number_clients_at_camp }}</b> &nbsp;
            <fa-icon
              [icon]="allSeenIcon"
              style="color: green"
              *ngIf="locationCamp.all_seen"
            ></fa-icon>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <div class="card-footer">
    <button
      type="button"
      class="pull-left btn btn-primary"
      (click)="back()"
      *ngIf="isAdmin"
    >
      <fa-icon [icon]="backIcon"></fa-icon> Back to Routes
    </button>
  </div>
</div>
<app-route-edit-modal
  #routeEditMdl
  (editedRoute)="editedRoute($event)"
></app-route-edit-modal>

<ng-template #editModal let-c="close" let-d="dismiss">
  <div class="modal-header">
    <h4 class="modal-title">Camp Details</h4>
    <button
      type="button"
      class="btn-close"
      aria-label="Close"
      (click)="d('Cross click')"
    ></button>
  </div>
  <div class="modal-body">
    <form [formGroup]="campForm" style="opacity: 0.93">
      <div class="container">
        <div class="row mb-3">
          <label for="camp-name" class="col-12 col-md-6 col-form-label">Camp Name:</label>
          <div class="col-12 col-md-6">
            <input
              id="camp-name"
              type="text"
              class="form-control"
              placeholder="Name"
              formControlName="name"
            />
          </div>
        </div>
        <div class="row mb-3" *ngIf="isAdmin">
          <label for="routes" class="col-12 col-md-6 col-form-label">Route:</label>
          <div class="col-12 col-md-6">
            <select id="routes" class="form-control" formControlName="route_id">
              <option value="" disabled selected>Select a route</option>
              <option *ngFor="let route of routes" [value]="route.id">{{ route.name }}</option>
            </select>
          </div>
        </div>
        <div class="row mb-3">
          <label for="ex-time" class="col-12 col-md-6 col-form-label">Expected Arrival Time:</label>
          <div class="col-12 col-md-6">
            <input id="ex-time" type="time" class="form-control" formControlName="expected_arrival_time" />
          </div>
        </div>
        <div class="row mb-3">
          <label for="camp-latitude" class="col-12 col-md-6 col-form-label">Camp Latitude:</label>
          <div class="col-12 col-md-6">
            <input id="camp-latitude" type="text" class="form-control" placeholder="Camp Latitude" formControlName="latitude" />
          </div>
        </div>
        <div class="row mb-3">
          <label for="camp-longitude" class="col-12 col-md-6 col-form-label">Camp Longitude:</label>
          <div class="col-12 col-md-6">
            <input id="camp-longitude" type="text" class="form-control" placeholder="Camp Longitude" formControlName="longitude" />
          </div>
        </div>
        <div class="row mb-3">
          <label for="notes" class="col-12 col-md-6 col-form-label">Notes:</label>
          <div class="col-12 col-md-6">
            <textarea id="notes" class="form-control" rows="3" placeholder="Notes" formControlName="notes"></textarea>
          </div>
        </div>
        <div class="row mb-3" *ngIf="isAdmin">
          <label for="admin-notes" class="col-12 col-md-6 col-form-label">Admin Notes:</label>
          <div class="col-12 col-md-6">
            <textarea id="admin-notes" class="form-control" rows="3" placeholder="Admin Notes" formControlName="admin_notes"></textarea>
          </div>
        </div>
      </div>
    </form>
  </div>
  <div class="modal-footer d-flex justify-content-between flex-wrap">
    <button
      type="button"
      class="btn btn-outline-primary"
      (click)="c('Close click')"
    >
      Don't Save
    </button>
    <button
      type="button"
      [disabled]="!campForm.valid"
      (click)="submitCamp(); c('')"
      class="btn btn-primary"
    >
      Save
    </button>
  </div>
</ng-template>
